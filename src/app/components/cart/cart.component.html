<!-- <div class="container mt-4">
  <h2 class="mb-4 text-center">ðŸ›’ My Cart</h2>

  <div *ngIf="!isLoggedIn" class="alert alert-warning text-center">
    You must <a routerLink="/login">login</a> to view your cart.
  </div>

  <div *ngIf="isLoggedIn">
    <div *ngIf="cartItems.length === 0" class="text-center">
      <p>Your cart is empty.</p>
    </div>

    <div class="row" *ngIf="cartItems.length > 0">
      <div class="col-md-4 mb-4" *ngFor="let item of cartItems">
        <div class="card h-100 shadow-sm">
          <img [src]="item.imageUrl" class="card-img-top" alt="{{ item.name }}" style="height: 250px; object-fit: cover;">
          <div class="card-body">
            <h5 class="card-title">{{ item.name }}</h5>
            <p class="card-text text-muted">{{ item.description }}</p>
            <p><strong>Gender:</strong> {{ item.gender }}</p>
            <p><strong>Price:</strong> â‚¹{{ item.price | number:'1.2-2' }}</p>
          </div>
          <div class="card-footer text-end">
            <button class="btn btn-danger btn-sm" (click)="removeItem(item.cartId)">Remove</button>
          </div>
        </div>
      </div>
    </div>

    <div class="text-end mt-4" *ngIf="cartItems.length > 0">
      <h4>Total: â‚¹{{ total | number:'1.2-2' }}</h4>
      <button class="btn btn-success mt-2">Proceed to Checkout</button>
    </div>
  </div>
</div> -->


<!-- <div class="container mt-4">
  <h2 class="mb-4 text-center">ðŸ›’ My Cart</h2>

  <div *ngIf="!isLoggedIn" class="alert alert-warning text-center">
    You must <a routerLink="/login">login</a> to view your cart.
  </div>

  <div *ngIf="isLoggedIn">
    <div *ngIf="cartItems.length === 0" class="text-center">
      <p>Your cart is empty.</p>
    </div>

    <div class="row" *ngIf="cartItems.length > 0">
      <div class="col-md-4 mb-4" *ngFor="let item of cartItems">
        <div class="card h-100 shadow-sm">
          <img [src]="item.imageUrl" class="card-img-top" alt="{{ item.name }}" style="height: 250px; object-fit: cover;">
          <div class="card-body">
            <h5 class="card-title">{{ item.name }}</h5>
            <p class="card-text text-muted">{{ item.description }}</p>
            <p><strong>Gender:</strong> {{ item.gender }}</p>
            <p><strong>Price:</strong> â‚¹{{ item.price | number:'1.2-2' }}</p>
          </div>
          <div class="card-footer text-end">
            <button class="btn btn-danger btn-sm" (click)="removeItem(item.cartId)">Remove</button>
          </div>
        </div>
      </div>
    </div>

    <div class="text-end mt-4" *ngIf="cartItems.length > 0">
      <h4>Total: â‚¹{{ total | number:'1.2-2' }}</h4>
      <button class="btn btn-success mt-2">Proceed to Checkout</button>
    </div>
  </div>
</div> -->

<div class="container mt-5 pt-5">

<div class="row" *ngIf="cartItems.length > 0">
  <div class="col-md-4 mb-4" *ngFor="let item of cartItems">
    <div class="card h-150 shadow-sm">
      <img [src]="item.imageUrl" class="card-img-top" alt="{{ item.name }}" style="height: 550px; object-fit: cover;">
      <div class="card-body">
        <h5 class="card-title">{{ item.name }}</h5>
        <p class="card-text text-muted">{{ item.description }}</p>
        <p><strong>Gender:</strong> {{ item.gender }}</p>
        <p><strong>Price:</strong> â‚¹{{ item.price | number:'1.2-2' }}</p>

        <!-- Quantity Controls -->
        <div class="d-flex align-items-center justify-content-center gap-2 mt-2">
          <button class="btn btn-outline-secondary btn-sm" (click)="updateQuantity(item, item.quantity - 1)">âˆ’</button>
          <span>{{ item.quantity }}</span>
          <button class="btn btn-outline-secondary btn-sm" (click)="updateQuantity(item, item.quantity + 1)">+</button>
        </div>

        <p class="mt-2 text-success fw-bold">
          Subtotal: â‚¹{{ (item.price * item.quantity) | number:'1.2-2' }}
        </p>
      </div>
      <div class="card-footer text-end">
        <button class="btn btn-danger btn-sm" (click)="removeItem(item.cartId)">Remove</button>
      </div>
    </div>
  </div>
</div>

<!-- Total -->
<div class="text-end mb-4" *ngIf="cartItems.length > 0">
  <h4>Total: â‚¹{{ total | number:'1.2-2' }}</h4>
  <button class="btn btn-success mt-2">Proceed to Checkout</button>
</div>
</div>
